{% extends 'base.html' %}
{% load static %}

{% block extra_head %}
    <link rel="stylesheet" href="{% static 'css/home.css' %}"> 
{% endblock %}

{% block content %}
    <div class="home-buttons">
        <a href="{% url 'create_travel_record' %}">æ—…è¡Œã‚’è¨˜éŒ²</a>
        {% if latest_travel_record_id %}
            <a href="{% url 'travelmemo_list' latest_travel_record_id %}">ãŸã³ãƒ¡ãƒ¢</a>
        {% else %}
            <p>ãŸã³ãƒ¡ãƒ¢ã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“</p>
        {% endif %}
    </div>

    <div class="roulette-section">
        <p id="nextPrefecture">æ¬¡ã®æ—…è¡Œå…ˆã¯â€¦</p>
        <button id="rouletteButton">ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚’å›ã™</button>
    </div>


    <script>
    document.getElementById("rouletteButton").addEventListener("click", function() {
        fetch("/roulette/")
        .then(response => response.json())
        .then(data => {
            if (data.prefecture) {
                document.getElementById("nextPrefecture").textContent = "æ¬¡ã®æ—…è¡Œå…ˆã¯ " + data.prefecture;
            } else {
                document.getElementById("nextPrefecture").textContent = "æœªè¨ªå•ã®éƒ½é“åºœçœŒãŒã‚ã‚Šã¾ã›ã‚“";
            }
        });
    });
    </script>

    <!-- æœ€è¿‘ã®æ—…è¡Œã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <h1>ğŸ›«æœ€è¿‘ã®æ—…è¡Œ</h1>
    <div class="recent-travels">
        {% for travel in recent_travels %}
            <div class="travel-item">
                <a href="{% url 'travel_detail' travel.id %}">
                    <!-- ãƒ¡ã‚¤ãƒ³å†™çœŸã‚’è¡¨ç¤º -->
                    {% if travel.main_photo_url %}
                        <img src="{{ travel.main_photo_url.url }}" alt="{{ travel.title }}">
                    {% else %}
                        <img src="{% static 'photos/default.jpg' %}" alt="Default Image">
                    {% endif %}
                    <!-- ã‚¿ã‚¤ãƒˆãƒ«ã‚’è¡¨ç¤º -->
                    <h2>{{ travel.title }}</h2>
                </a>
            </div>
        {% endfor %}
    </div>
{% endblock %}
